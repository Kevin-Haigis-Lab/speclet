<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.8.1" />
<title>src.modeling.pymc3_sampling_api API documentation</title>
<meta name="description" content="Standardization of the interactions with PyMC3 sampling." />
<link href='https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.0/normalize.min.css' rel='stylesheet'>
<link href='https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/8.0.0/sanitize.min.css' rel='stylesheet'>
<link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css" rel="stylesheet">
<style>.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script async src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS_CHTML'></script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>src.modeling.pymc3_sampling_api</code></h1>
</header>
<section id="section-intro">
<p>Standardization of the interactions with PyMC3 sampling.</p>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">#!/usr/bin/env python3

&#34;&#34;&#34;Standardization of the interactions with PyMC3 sampling.&#34;&#34;&#34;

from typing import Any, Callable, Optional, TypeVar, Union

import arviz as az
import numpy as np
import pymc3 as pm
from pydantic import BaseModel, validator

#### ---- Result Types ---- ####

PossibleTrace = TypeVar(&#34;PossibleTrace&#34;)


class MCMCSamplingResults(BaseModel):
    &#34;&#34;&#34;The results of MCMC sampling.&#34;&#34;&#34;

    trace: pm.backends.base.MultiTrace
    prior_predictive: dict[str, np.ndarray]
    posterior_predictive: dict[str, np.ndarray]

    class Config:
        &#34;&#34;&#34;Configuration for pydantic validation.&#34;&#34;&#34;

        arbitrary_types_allowed = True

    @validator(&#34;trace&#34;)
    def validate_trace(cls, trace: PossibleTrace) -&gt; PossibleTrace:
        &#34;&#34;&#34;Validate a PyMC3 MultiTrace object.

        Args:
            trace ([type]): MultiTrace object.

        Raises:
            ValueError: If the object does not satisfy pre-determined requirements.

        Returns:
            [type]: The original object (if valid).
        &#34;&#34;&#34;
        trace_methods = dir(trace)
        expected_methods = [&#34;get_values&#34;]
        for method in expected_methods:
            if method not in trace_methods:
                raise ValueError(
                    f&#34;Object passed for trace does not have the method &#39;{method}&#39;.&#34;
                )
        return trace


class ApproximationSamplingResults(MCMCSamplingResults):
    &#34;&#34;&#34;The results of ADVI fitting and sampling.&#34;&#34;&#34;

    approximation: pm.Approximation


def convert_samples_to_arviz(
    model: pm.Model,
    res: Union[MCMCSamplingResults, ApproximationSamplingResults],
) -&gt; az.InferenceData:
    &#34;&#34;&#34;Turn the results from a sampling procedure into a standard ArviZ object.

    Args:
        model (pm.Model): The PyMC3 model.
        res (Union[MCMCSamplingResults, ApproximationSamplingResults]): The results of
          the sampling/fitting process.

    Returns:
        az.InferenceData: A standard ArviZ data object.
    &#34;&#34;&#34;
    return az.from_pymc3(
        trace=res.trace,
        model=model,
        prior=res.prior_predictive,
        posterior_predictive=res.posterior_predictive,
    )


#### ---- Interface with PyMC3 ---- ####


def pymc3_sampling_procedure(
    model: pm.Model,
    mcmc_draws: int = 1000,
    tune: int = 1000,
    chains: int = 3,
    cores: Optional[int] = None,
    prior_pred_samples: int = 1000,
    random_seed: Optional[int] = None,
    sample_kwargs: Optional[dict[str, Any]] = None,
) -&gt; MCMCSamplingResults:
    &#34;&#34;&#34;Run a standard PyMC3 sampling procedure.

    TODO: Remove `post_pred_samples` from argument list and modeling
    options.

    Args:
        model (pm.Model): PyMC3 model.
        mcmc_draws (int, optional): Number of MCMC draws. Defaults to 1000.
        tune (int, optional): Number of tuning steps. Defaults to 1000.
        chains (int, optional): Number of chains. Defaults to 3.
        cores (Optional[int], optional): Number of cores. Defaults to None.
        prior_pred_samples (int, optional): Number of samples from the prior
          distributions. Defaults to 1000.
        random_seed (Optional[int], optional): The random seed for sampling.
          Defaults to None.
        sample_kwargs (Dict[str, Any], optional): Kwargs for the sampling method.
          Defaults to {}.

    Returns:
        MCMCSamplingResults: A collection of the fitting and sampling results.
    &#34;&#34;&#34;
    if sample_kwargs is None:
        sample_kwargs = {}

    with model:
        prior_pred = pm.sample_prior_predictive(
            prior_pred_samples, random_seed=random_seed
        )
        trace = pm.sample(
            draws=mcmc_draws,
            tune=tune,
            chains=chains,
            cores=cores,
            random_seed=random_seed,
            return_inferencedata=False,
            **sample_kwargs,
        )

        post_pred = pm.sample_posterior_predictive(trace, random_seed=random_seed)

    return MCMCSamplingResults(
        trace=trace, prior_predictive=prior_pred, posterior_predictive=post_pred
    )


def pymc3_advi_approximation_procedure(
    model: pm.Model,
    method: str = &#34;advi&#34;,
    n_iterations: int = 100000,
    draws: int = 1000,
    prior_pred_samples: int = 1000,
    callbacks: Optional[list[Callable]] = None,
    random_seed: Optional[int] = None,
    fit_kwargs: Optional[dict[Any, Any]] = None,
) -&gt; ApproximationSamplingResults:
    &#34;&#34;&#34;Run a standard PyMC3 ADVI fitting procedure.

    Args:
        model (pm.Model): PyMC3 model.
        method (str): VI method to use. Defaults to &#34;advi&#34;.
        n_iterations (int): Maximum number of fitting steps. Defaults to 100000.
        draws (int, optional): Number of MCMC samples to draw from the fit model.
          Defaults to 1000.
        prior_pred_samples (int, optional): Number of samples from the prior
          distributions. Defaults to 1000.
        callbacks (List[Callable], optional): List of fitting callbacks.
          Default is None.
        random_seed (Optional[int], optional): The random seed for sampling.
          Defaults to None.
        fit_kwargs (Dict[str, Any], optional): Kwargs for the fitting method.
          Defaults to {}.

    Returns:
        ApproximationSamplingResults: A collection of the fitting and sampling results.
    &#34;&#34;&#34;
    if fit_kwargs is None:
        fit_kwargs = {}

    with model:
        prior_pred = pm.sample_prior_predictive(
            prior_pred_samples, random_seed=random_seed
        )
        approx = pm.fit(n_iterations, method=method, callbacks=callbacks, **fit_kwargs)
        advi_trace = approx.sample(draws)
        post_pred = pm.sample_posterior_predictive(
            trace=advi_trace, random_seed=random_seed
        )

    return ApproximationSamplingResults(
        trace=advi_trace,
        prior_predictive=prior_pred,
        posterior_predictive=post_pred,
        approximation=approx,
    )</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-functions">Functions</h2>
<dl>
<dt id="src.modeling.pymc3_sampling_api.convert_samples_to_arviz"><code class="name flex">
<span>def <span class="ident">convert_samples_to_arviz</span></span>(<span>model: pymc3.model.Model, res: Union[src.modeling.pymc3_sampling_api.MCMCSamplingResults, src.modeling.pymc3_sampling_api.ApproximationSamplingResults]) -> arviz.data.inference_data.InferenceData</span>
</code></dt>
<dd>
<div class="desc"><p>Turn the results from a sampling procedure into a standard ArviZ object.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>model</code></strong> :&ensp;<code>pm.Model</code></dt>
<dd>The PyMC3 model.</dd>
<dt><strong><code>res</code></strong> :&ensp;<code>Union[<a title="src.modeling.pymc3_sampling_api.MCMCSamplingResults" href="#src.modeling.pymc3_sampling_api.MCMCSamplingResults">MCMCSamplingResults</a>, <a title="src.modeling.pymc3_sampling_api.ApproximationSamplingResults" href="#src.modeling.pymc3_sampling_api.ApproximationSamplingResults">ApproximationSamplingResults</a>]</code></dt>
<dd>The results of
the sampling/fitting process.</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>az.InferenceData</code></dt>
<dd>A standard ArviZ data object.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def convert_samples_to_arviz(
    model: pm.Model,
    res: Union[MCMCSamplingResults, ApproximationSamplingResults],
) -&gt; az.InferenceData:
    &#34;&#34;&#34;Turn the results from a sampling procedure into a standard ArviZ object.

    Args:
        model (pm.Model): The PyMC3 model.
        res (Union[MCMCSamplingResults, ApproximationSamplingResults]): The results of
          the sampling/fitting process.

    Returns:
        az.InferenceData: A standard ArviZ data object.
    &#34;&#34;&#34;
    return az.from_pymc3(
        trace=res.trace,
        model=model,
        prior=res.prior_predictive,
        posterior_predictive=res.posterior_predictive,
    )</code></pre>
</details>
</dd>
<dt id="src.modeling.pymc3_sampling_api.pymc3_advi_approximation_procedure"><code class="name flex">
<span>def <span class="ident">pymc3_advi_approximation_procedure</span></span>(<span>model: pymc3.model.Model, method: str = 'advi', n_iterations: int = 100000, draws: int = 1000, prior_pred_samples: int = 1000, callbacks: Optional[list[Callable]] = None, random_seed: Optional[int] = None, fit_kwargs: Optional[dict[Any, Any]] = None) -> <a title="src.modeling.pymc3_sampling_api.ApproximationSamplingResults" href="#src.modeling.pymc3_sampling_api.ApproximationSamplingResults">ApproximationSamplingResults</a></span>
</code></dt>
<dd>
<div class="desc"><p>Run a standard PyMC3 ADVI fitting procedure.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>model</code></strong> :&ensp;<code>pm.Model</code></dt>
<dd>PyMC3 model.</dd>
<dt><strong><code>method</code></strong> :&ensp;<code>str</code></dt>
<dd>VI method to use. Defaults to "advi".</dd>
<dt><strong><code>n_iterations</code></strong> :&ensp;<code>int</code></dt>
<dd>Maximum number of fitting steps. Defaults to 100000.</dd>
<dt><strong><code>draws</code></strong> :&ensp;<code>int</code>, optional</dt>
<dd>Number of MCMC samples to draw from the fit model.
Defaults to 1000.</dd>
<dt><strong><code>prior_pred_samples</code></strong> :&ensp;<code>int</code>, optional</dt>
<dd>Number of samples from the prior
distributions. Defaults to 1000.</dd>
<dt><strong><code>callbacks</code></strong> :&ensp;<code>List[Callable]</code>, optional</dt>
<dd>List of fitting callbacks.
Default is None.</dd>
<dt><strong><code>random_seed</code></strong> :&ensp;<code>Optional[int]</code>, optional</dt>
<dd>The random seed for sampling.
Defaults to None.</dd>
<dt><strong><code>fit_kwargs</code></strong> :&ensp;<code>Dict[str, Any]</code>, optional</dt>
<dd>Kwargs for the fitting method.
Defaults to {}.</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code><a title="src.modeling.pymc3_sampling_api.ApproximationSamplingResults" href="#src.modeling.pymc3_sampling_api.ApproximationSamplingResults">ApproximationSamplingResults</a></code></dt>
<dd>A collection of the fitting and sampling results.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def pymc3_advi_approximation_procedure(
    model: pm.Model,
    method: str = &#34;advi&#34;,
    n_iterations: int = 100000,
    draws: int = 1000,
    prior_pred_samples: int = 1000,
    callbacks: Optional[list[Callable]] = None,
    random_seed: Optional[int] = None,
    fit_kwargs: Optional[dict[Any, Any]] = None,
) -&gt; ApproximationSamplingResults:
    &#34;&#34;&#34;Run a standard PyMC3 ADVI fitting procedure.

    Args:
        model (pm.Model): PyMC3 model.
        method (str): VI method to use. Defaults to &#34;advi&#34;.
        n_iterations (int): Maximum number of fitting steps. Defaults to 100000.
        draws (int, optional): Number of MCMC samples to draw from the fit model.
          Defaults to 1000.
        prior_pred_samples (int, optional): Number of samples from the prior
          distributions. Defaults to 1000.
        callbacks (List[Callable], optional): List of fitting callbacks.
          Default is None.
        random_seed (Optional[int], optional): The random seed for sampling.
          Defaults to None.
        fit_kwargs (Dict[str, Any], optional): Kwargs for the fitting method.
          Defaults to {}.

    Returns:
        ApproximationSamplingResults: A collection of the fitting and sampling results.
    &#34;&#34;&#34;
    if fit_kwargs is None:
        fit_kwargs = {}

    with model:
        prior_pred = pm.sample_prior_predictive(
            prior_pred_samples, random_seed=random_seed
        )
        approx = pm.fit(n_iterations, method=method, callbacks=callbacks, **fit_kwargs)
        advi_trace = approx.sample(draws)
        post_pred = pm.sample_posterior_predictive(
            trace=advi_trace, random_seed=random_seed
        )

    return ApproximationSamplingResults(
        trace=advi_trace,
        prior_predictive=prior_pred,
        posterior_predictive=post_pred,
        approximation=approx,
    )</code></pre>
</details>
</dd>
<dt id="src.modeling.pymc3_sampling_api.pymc3_sampling_procedure"><code class="name flex">
<span>def <span class="ident">pymc3_sampling_procedure</span></span>(<span>model: pymc3.model.Model, mcmc_draws: int = 1000, tune: int = 1000, chains: int = 3, cores: Optional[int] = None, prior_pred_samples: int = 1000, random_seed: Optional[int] = None, sample_kwargs: Optional[dict[str, Any]] = None) -> <a title="src.modeling.pymc3_sampling_api.MCMCSamplingResults" href="#src.modeling.pymc3_sampling_api.MCMCSamplingResults">MCMCSamplingResults</a></span>
</code></dt>
<dd>
<div class="desc"><p>Run a standard PyMC3 sampling procedure.</p>
<p>TODO: Remove <code>post_pred_samples</code> from argument list and modeling
options.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>model</code></strong> :&ensp;<code>pm.Model</code></dt>
<dd>PyMC3 model.</dd>
<dt><strong><code>mcmc_draws</code></strong> :&ensp;<code>int</code>, optional</dt>
<dd>Number of MCMC draws. Defaults to 1000.</dd>
<dt><strong><code>tune</code></strong> :&ensp;<code>int</code>, optional</dt>
<dd>Number of tuning steps. Defaults to 1000.</dd>
<dt><strong><code>chains</code></strong> :&ensp;<code>int</code>, optional</dt>
<dd>Number of chains. Defaults to 3.</dd>
<dt><strong><code>cores</code></strong> :&ensp;<code>Optional[int]</code>, optional</dt>
<dd>Number of cores. Defaults to None.</dd>
<dt><strong><code>prior_pred_samples</code></strong> :&ensp;<code>int</code>, optional</dt>
<dd>Number of samples from the prior
distributions. Defaults to 1000.</dd>
<dt><strong><code>random_seed</code></strong> :&ensp;<code>Optional[int]</code>, optional</dt>
<dd>The random seed for sampling.
Defaults to None.</dd>
<dt><strong><code>sample_kwargs</code></strong> :&ensp;<code>Dict[str, Any]</code>, optional</dt>
<dd>Kwargs for the sampling method.
Defaults to {}.</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code><a title="src.modeling.pymc3_sampling_api.MCMCSamplingResults" href="#src.modeling.pymc3_sampling_api.MCMCSamplingResults">MCMCSamplingResults</a></code></dt>
<dd>A collection of the fitting and sampling results.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def pymc3_sampling_procedure(
    model: pm.Model,
    mcmc_draws: int = 1000,
    tune: int = 1000,
    chains: int = 3,
    cores: Optional[int] = None,
    prior_pred_samples: int = 1000,
    random_seed: Optional[int] = None,
    sample_kwargs: Optional[dict[str, Any]] = None,
) -&gt; MCMCSamplingResults:
    &#34;&#34;&#34;Run a standard PyMC3 sampling procedure.

    TODO: Remove `post_pred_samples` from argument list and modeling
    options.

    Args:
        model (pm.Model): PyMC3 model.
        mcmc_draws (int, optional): Number of MCMC draws. Defaults to 1000.
        tune (int, optional): Number of tuning steps. Defaults to 1000.
        chains (int, optional): Number of chains. Defaults to 3.
        cores (Optional[int], optional): Number of cores. Defaults to None.
        prior_pred_samples (int, optional): Number of samples from the prior
          distributions. Defaults to 1000.
        random_seed (Optional[int], optional): The random seed for sampling.
          Defaults to None.
        sample_kwargs (Dict[str, Any], optional): Kwargs for the sampling method.
          Defaults to {}.

    Returns:
        MCMCSamplingResults: A collection of the fitting and sampling results.
    &#34;&#34;&#34;
    if sample_kwargs is None:
        sample_kwargs = {}

    with model:
        prior_pred = pm.sample_prior_predictive(
            prior_pred_samples, random_seed=random_seed
        )
        trace = pm.sample(
            draws=mcmc_draws,
            tune=tune,
            chains=chains,
            cores=cores,
            random_seed=random_seed,
            return_inferencedata=False,
            **sample_kwargs,
        )

        post_pred = pm.sample_posterior_predictive(trace, random_seed=random_seed)

    return MCMCSamplingResults(
        trace=trace, prior_predictive=prior_pred, posterior_predictive=post_pred
    )</code></pre>
</details>
</dd>
</dl>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="src.modeling.pymc3_sampling_api.ApproximationSamplingResults"><code class="flex name class">
<span>class <span class="ident">ApproximationSamplingResults</span></span>
<span>(</span><span>*, trace: pymc3.backends.base.MultiTrace, prior_predictive: dict, posterior_predictive: dict, approximation: pymc3.variational.opvi.Approximation)</span>
</code></dt>
<dd>
<div class="desc"><p>The results of ADVI fitting and sampling.</p>
<p>Create a new model by parsing and validating input data from keyword arguments.</p>
<p>Raises ValidationError if the input data cannot be parsed to form a valid model.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class ApproximationSamplingResults(MCMCSamplingResults):
    &#34;&#34;&#34;The results of ADVI fitting and sampling.&#34;&#34;&#34;

    approximation: pm.Approximation</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="src.modeling.pymc3_sampling_api.MCMCSamplingResults" href="#src.modeling.pymc3_sampling_api.MCMCSamplingResults">MCMCSamplingResults</a></li>
<li>pydantic.main.BaseModel</li>
<li>pydantic.utils.Representation</li>
</ul>
<h3>Inherited members</h3>
<ul class="hlist">
<li><code><b><a title="src.modeling.pymc3_sampling_api.MCMCSamplingResults" href="#src.modeling.pymc3_sampling_api.MCMCSamplingResults">MCMCSamplingResults</a></b></code>:
<ul class="hlist">
<li><code><a title="src.modeling.pymc3_sampling_api.MCMCSamplingResults.Config" href="#src.modeling.pymc3_sampling_api.MCMCSamplingResults.Config">Config</a></code></li>
<li><code><a title="src.modeling.pymc3_sampling_api.MCMCSamplingResults.validate_trace" href="#src.modeling.pymc3_sampling_api.MCMCSamplingResults.validate_trace">validate_trace</a></code></li>
</ul>
</li>
</ul>
</dd>
<dt id="src.modeling.pymc3_sampling_api.MCMCSamplingResults"><code class="flex name class">
<span>class <span class="ident">MCMCSamplingResults</span></span>
<span>(</span><span>*, trace: pymc3.backends.base.MultiTrace, prior_predictive: dict, posterior_predictive: dict)</span>
</code></dt>
<dd>
<div class="desc"><p>The results of MCMC sampling.</p>
<p>Create a new model by parsing and validating input data from keyword arguments.</p>
<p>Raises ValidationError if the input data cannot be parsed to form a valid model.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class MCMCSamplingResults(BaseModel):
    &#34;&#34;&#34;The results of MCMC sampling.&#34;&#34;&#34;

    trace: pm.backends.base.MultiTrace
    prior_predictive: dict[str, np.ndarray]
    posterior_predictive: dict[str, np.ndarray]

    class Config:
        &#34;&#34;&#34;Configuration for pydantic validation.&#34;&#34;&#34;

        arbitrary_types_allowed = True

    @validator(&#34;trace&#34;)
    def validate_trace(cls, trace: PossibleTrace) -&gt; PossibleTrace:
        &#34;&#34;&#34;Validate a PyMC3 MultiTrace object.

        Args:
            trace ([type]): MultiTrace object.

        Raises:
            ValueError: If the object does not satisfy pre-determined requirements.

        Returns:
            [type]: The original object (if valid).
        &#34;&#34;&#34;
        trace_methods = dir(trace)
        expected_methods = [&#34;get_values&#34;]
        for method in expected_methods:
            if method not in trace_methods:
                raise ValueError(
                    f&#34;Object passed for trace does not have the method &#39;{method}&#39;.&#34;
                )
        return trace</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li>pydantic.main.BaseModel</li>
<li>pydantic.utils.Representation</li>
</ul>
<h3>Subclasses</h3>
<ul class="hlist">
<li><a title="src.modeling.pymc3_sampling_api.ApproximationSamplingResults" href="#src.modeling.pymc3_sampling_api.ApproximationSamplingResults">ApproximationSamplingResults</a></li>
</ul>
<h3>Class variables</h3>
<dl>
<dt id="src.modeling.pymc3_sampling_api.MCMCSamplingResults.Config"><code class="name">var <span class="ident">Config</span></code></dt>
<dd>
<div class="desc"><p>Configuration for pydantic validation.</p></div>
</dd>
</dl>
<h3>Static methods</h3>
<dl>
<dt id="src.modeling.pymc3_sampling_api.MCMCSamplingResults.validate_trace"><code class="name flex">
<span>def <span class="ident">validate_trace</span></span>(<span>trace: ~PossibleTrace) -> ~PossibleTrace</span>
</code></dt>
<dd>
<div class="desc"><p>Validate a PyMC3 MultiTrace object.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>trace</code></strong> :&ensp;<code>[type]</code></dt>
<dd>MultiTrace object.</dd>
</dl>
<h2 id="raises">Raises</h2>
<dl>
<dt><code>ValueError</code></dt>
<dd>If the object does not satisfy pre-determined requirements.</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>[type]</code></dt>
<dd>The original object (if valid).</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@validator(&#34;trace&#34;)
def validate_trace(cls, trace: PossibleTrace) -&gt; PossibleTrace:
    &#34;&#34;&#34;Validate a PyMC3 MultiTrace object.

    Args:
        trace ([type]): MultiTrace object.

    Raises:
        ValueError: If the object does not satisfy pre-determined requirements.

    Returns:
        [type]: The original object (if valid).
    &#34;&#34;&#34;
    trace_methods = dir(trace)
    expected_methods = [&#34;get_values&#34;]
    for method in expected_methods:
        if method not in trace_methods:
            raise ValueError(
                f&#34;Object passed for trace does not have the method &#39;{method}&#39;.&#34;
            )
    return trace</code></pre>
</details>
</dd>
</dl>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="src.modeling" href="index.html">src.modeling</a></code></li>
</ul>
</li>
<li><h3><a href="#header-functions">Functions</a></h3>
<ul class="">
<li><code><a title="src.modeling.pymc3_sampling_api.convert_samples_to_arviz" href="#src.modeling.pymc3_sampling_api.convert_samples_to_arviz">convert_samples_to_arviz</a></code></li>
<li><code><a title="src.modeling.pymc3_sampling_api.pymc3_advi_approximation_procedure" href="#src.modeling.pymc3_sampling_api.pymc3_advi_approximation_procedure">pymc3_advi_approximation_procedure</a></code></li>
<li><code><a title="src.modeling.pymc3_sampling_api.pymc3_sampling_procedure" href="#src.modeling.pymc3_sampling_api.pymc3_sampling_procedure">pymc3_sampling_procedure</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="src.modeling.pymc3_sampling_api.ApproximationSamplingResults" href="#src.modeling.pymc3_sampling_api.ApproximationSamplingResults">ApproximationSamplingResults</a></code></h4>
</li>
<li>
<h4><code><a title="src.modeling.pymc3_sampling_api.MCMCSamplingResults" href="#src.modeling.pymc3_sampling_api.MCMCSamplingResults">MCMCSamplingResults</a></code></h4>
<ul class="">
<li><code><a title="src.modeling.pymc3_sampling_api.MCMCSamplingResults.Config" href="#src.modeling.pymc3_sampling_api.MCMCSamplingResults.Config">Config</a></code></li>
<li><code><a title="src.modeling.pymc3_sampling_api.MCMCSamplingResults.validate_trace" href="#src.modeling.pymc3_sampling_api.MCMCSamplingResults.validate_trace">validate_trace</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc"><cite>pdoc</cite> 0.8.1</a>.</p>
</footer>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad()</script>
</body>
</html>